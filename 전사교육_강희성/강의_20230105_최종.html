<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>

    // let str = "abcdbdbdbdbdbdbd";

    // function* find(){
    //   yield str.indexOf("b");
    //   // for(let x of str){
    //   //   console.log(x)
    //   // }
    // }
    // let result = find();
    // result.next();

    // function* f(str) {
    //   for (let p = 0; ; ++p) {
    //     p = str.indexOf('b', p);
    //     if (p === -1) break;
    //     yield p;
    //   }
    // }

    // for (let s of f('abababababab', 5)) {
    //   console.log(s);
    // }

    
    //오류가 있는 소스
    // function* f(str,num) {
    //   let count = 0;
    //   for(let p = 0; ; ++p) {
    //     p = str.indexOf('b', p);
    //     if (num === count || p === -1) break;
    //     count++;
    //     yield p;
    //   }
    // }

    // for (let s of f('bbbabbbbababababab',5)) {
    //   console.log(s);
    // }

    function* f(str, num) {
      num ??= str.length;

      for (let p = 0; 0 < num; ++p, --num) {
        p = str.indexOf('b', p);
        if (p === -1) break;
        yield p;
      }
    }

    for (let s of f('abababababab',3)) {
      console.log(s);
    }





    



    


  </script>

  <pre>

20230115

async function af(p) {
    console.log(p+'af');
    return 1;
}

function  st(p) {
    return new Promise((resolve)=>{
        console.log('st inner');
        setTimeout(()=>{
            console.log(p + 'st1');
            resolve('st_st');
            console.log(p + 'st2');
        }, 1000);
    });
}

function f() {
    console.log('f');
}

async function t(p) {
    console.log(p+'t1');
    await st(p); //af(p);
    console.log(p+'t2');
    await st(p); //af(p);
    console.log(p+'t3');
}
/*
(async function() {
    await t('A');
    await t('B');
})();

console.log(1);
*/

console.log(1);
t('A');




    generator

  </pre>
</body>
</html>